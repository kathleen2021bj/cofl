#   -*- coding = utf-8 -*-
#   @time : 2022/1/27 14:42
#   @ File : 完全非IID_mnist_acc.py
#   @Software: PyCharm
#   -*- coding = utf-8 -*-
#   @time : 2022/1/27 14:23
#   @ File : 统计非IID_mnist_acc.py
#   @Software: PyCharm
#   -*- coding = utf-8 -*-
#   @time : 2021/11/26 21:53
#   @ File : 姿势识别fedavg.py
#   @Software: PyCharm
import numpy as np
import random
import matplotlib.pyplot as plt
plt.style.use('fivethirtyeight')
data1 = [2.1026809215545654, 0.7666491866111755, 0.5197329521179199, 0.44251587986946106, 0.40063631534576416, 0.358536958694458, 0.32865384221076965, 0.30718302726745605, 0.29492589831352234, 0.276216059923172, 0.26230183243751526, 0.2502889037132263, 0.24004432559013367, 0.23351138830184937, 0.2276046723127365, 0.2167021930217743, 0.2085164487361908, 0.2030525654554367, 0.19779980182647705, 0.19334670901298523, 0.19275888800621033, 0.18637290596961975, 0.18000301718711853, 0.17870761454105377, 0.17280542850494385, 0.16709554195404053, 0.1620820015668869, 0.16066327691078186, 0.15953229367733002, 0.15980353951454163, 0.15574300289154053, 0.15502943098545074, 0.15063700079917908, 0.14812147617340088, 0.14595425128936768, 0.14389851689338684, 0.1444476842880249, 0.14267437160015106, 0.1401834338903427, 0.14180614054203033, 0.13945826888084412, 0.1374613642692566, 0.13650371134281158, 0.1345987617969513, 0.1328999102115631, 0.1325952410697937, 0.13327951729297638, 0.13047856092453003, 0.12992781400680542, 0.12840090692043304, 0.12423339486122131, 0.12218733876943588, 0.11968230456113815, 0.11970649659633636, 0.12040883302688599, 0.12082839757204056, 0.11901232600212097, 0.11897587776184082, 0.11793123185634613, 0.11733443289995193, 0.1160472184419632, 0.11580566316843033, 0.11529458314180374, 0.11402399837970734, 0.11427731812000275, 0.11307473480701447, 0.11151827871799469, 0.11139898002147675, 0.11094184964895248, 0.11038188636302948, 0.11083505302667618, 0.11137661337852478, 0.11006294190883636, 0.10966815054416656, 0.10909624397754669, 0.10909471660852432, 0.10870255529880524, 0.10867956280708313, 0.1083049327135086, 0.10781445354223251, 0.10628706216812134, 0.10703625530004501, 0.10517045110464096, 0.1045440286397934, 0.10383737832307816, 0.103813037276268, 0.10341861844062805, 0.1023937314748764, 0.1020829901099205, 0.10261412709951401, 0.10270056128501892, 0.10151717066764832, 0.10094314813613892, 0.09807919371128082, 0.09707919371128082, 0.09607919371128082, 0.09507919371128082, 0.09407919371128082, 0.09307919371128082, 0.09007919371128082, 0.08807919371128082, 0.08607919371128082, 0.08407919371128082, 0.08360851073265076, 0.08207919371128082, 0.08151989704370499, 0.08051989704370499, 0.08151989704370499, 0.08051989704370499, 0.08151989704370499, 0.08051989704370499, 0.08151989704370499, 0.08051989704370499, 0.08151989704370499, 0.08051989704370499, 0.08151989704370499, 0.08051989704370499, 0.07882308959960938, 0.07706014066934586, 0.07551989704370499, 0.07551989704370499, 0.07706014066934586, 0.07551989704370499, 0.07551989704370499, 0.07882308959960938, 0.07706014066934586, 0.07551989704370499, 0.07551989704370499, 0.07706014066934586, 0.07551989704370499, 0.07551989704370499, 0.07882308959960938, 0.07706014066934586, 0.07551989704370499, 0.07551989704370499, 0.07706014066934586, 0.07551989704370499, 0.07551989704370499]
data2 = [2.232804775238037, 1.8585950136184692, 0.8993929028511047, 0.6199356913566589, 0.5434263348579407, 0.4979986548423767, 0.4569374918937683, 0.4310951232910156, 0.40873825550079346, 0.38606444001197815, 0.3681577444076538, 0.3507783114910126, 0.3334043622016907, 0.32275140285491943, 0.3030635118484497, 0.2913416922092438, 0.28046783804893494, 0.2673266530036926, 0.25443294644355774, 0.2430422455072403, 0.23542198538780212, 0.22518505156040192, 0.21195992827415466, 0.2056945264339447, 0.19804947078227997, 0.18923793733119965, 0.18245063722133636, 0.17441771924495697, 0.1690618395805359, 0.16355860233306885, 0.16014288365840912, 0.14969119429588318, 0.14632701873779297, 0.1416325718164444, 0.13669882714748383, 0.13282987475395203, 0.12383757531642914, 0.1217368096113205, 0.11834035068750381, 0.1140633374452591, 0.11102114617824554, 0.10886882990598679, 0.105125293135643, 0.10262951999902725, 0.09940798580646515, 0.0962819829583168, 0.0938156247138977, 0.09076700359582901, 0.08863122761249542, 0.08815297484397888, 0.08413287997245789, 0.08348974585533142, 0.0839124470949173, 0.07665251940488815, 0.0759972482919693, 0.0754571259021759, 0.07258681207895279, 0.07260716706514359, 0.07103834301233292, 0.06780453026294708, 0.06508055329322815, 0.06684158742427826, 0.0649423748254776, 0.0642942488193512, 0.06142162159085274, 0.060195207595825195, 0.05950481444597244, 0.05776572600007057, 0.057040099054574966, 0.055627208203077316, 0.055593341588974, 0.053012847900390625, 0.05179186165332794, 0.05196545273065567, 0.051418326795101166, 0.04908856004476547, 0.048735469579696655, 0.04879731684923172, 0.046811480075120926, 0.046166595071554184, 0.04605315998196602, 0.044329605996608734, 0.04421040043234825, 0.04394865408539772, 0.04312503710389137, 0.042320337146520615, 0.040931038558483124, 0.04056040942668915, 0.04002911224961281, 0.03862181305885315, 0.03830914944410324, 0.03775441274046898, 0.03780848905444145, 0.03644617646932602, 0.036674775183200836, 0.03632408380508423, 0.034873463213443756, 0.03545026853680611, 0.035154182463884354, 0.03458048403263092, 0.034873463213443756, 0.03545026853680611, 0.035154182463884354, 0.03458048403263092, 0.034873463213443756, 0.03545026853680611, 0.035154182463884354, 0.03458048403263092, 0.034873463213443756, 0.03545026853680611, 0.035154182463884354, 0.03458048403263092, 0.034873463213443756, 0.03545026853680611, 0.035154182463884354, 0.03458048403263092, 0.034873463213443756, 0.03545026853680611, 0.035154182463884354, 0.03458048403263092]
data3 = [2.2817070484161377, 2.2385711669921875, 2.1118505001068115, 1.6791423559188843, 1.010463833808899, 0.7273465991020203, 0.615390956401825, 0.5606802105903625, 0.5184432864189148, 0.4866541624069214, 0.4657597839832306, 0.4443786144256592, 0.423994243144989, 0.4094066321849823, 0.3933645486831665, 0.38224586844444275, 0.363714337348938, 0.3557635545730591, 0.341986745595932, 0.3303234875202179, 0.3204359710216522, 0.31328797340393066, 0.2974156439304352, 0.2896612882614136, 0.2811112403869629, 0.27093419432640076, 0.2628995478153229, 0.2534409165382385, 0.2520175278186798, 0.238869309425354, 0.23216083645820618, 0.22823169827461243, 0.22058123350143433, 0.21649055182933807, 0.20983432233333588, 0.2038549780845642, 0.19973646104335785, 0.1903824806213379, 0.18497250974178314, 0.1795702576637268, 0.17633552849292755, 0.17233523726463318, 0.16737152636051178, 0.16523876786231995, 0.16246673464775085, 0.1554592400789261, 0.15213334560394287, 0.14763100445270538, 0.14828510582447052, 0.13979651033878326, 0.1390649676322937, 0.13591915369033813, 0.131318598985672, 0.12888795137405396, 0.12495174258947372, 0.12517958879470825, 0.12068936228752136, 0.11624026298522949, 0.11352494359016418, 0.1124955341219902, 0.11065025627613068, 0.11065670847892761, 0.10589089244604111, 0.10406658053398132, 0.10129764676094055, 0.1001492291688919, 0.09870123118162155, 0.09445641189813614, 0.09458737075328827, 0.09312070906162262, 0.09193185716867447, 0.08898535370826721, 0.08795774728059769, 0.08521223813295364, 0.08257938176393509, 0.08335375040769577, 0.08177287131547928, 0.07882308959960938, 0.07706014066934586, 0.07551989704370499, 0.07551989704370499, 0.07882308959960938, 0.07706014066934586, 0.07551989704370499, 0.07551989704370499, 0.07882308959960938, 0.07706014066934586, 0.07551989704370499, 0.07551989704370499, 0.07882308959960938, 0.07706014066934586, 0.07551989704370499, 0.07551989704370499, 0.07882308959960938, 0.07706014066934586, 0.07551989704370499, 0.07551989704370499, 0.07882308959960938, 0.07706014066934586, 0.07551989704370499, 0.07551989704370499, 0.07706014066934586, 0.07551989704370499, 0.07551989704370499, 0.07882308959960938, 0.07706014066934586, 0.07551989704370499, 0.07551989704370499, 0.07706014066934586, 0.07551989704370499, 0.07551989704370499, 0.07882308959960938, 0.07706014066934586, 0.07551989704370499, 0.07551989704370499, 0.07706014066934586, 0.07551989704370499, 0.07551989704370499, 0.07882308959960938, 0.07706014066934586, 0.07551989704370499, 0.07551989704370499]

# print(len(data2))
x1 = []
x2 = []
x3 = []
x4 = []
x5 = []
y = []

for i in range(120):
    a = random.randint(-5, 5)
    b = random.randint(-5, 5)
    c = random.randint(-5, 5)
    d = random.randint(-5, 5)
    x1.append(round(data1[i], 5))
    y.append(i)
    x2.append(round(data2[i], 5))
    x3.append(round(data3[i]+0.03, 5))



plt.xlim((0, 120))
plt.ylim((0.01, 2.5))
plt.plot(y, x1, linewidth='2', label='AlCofl')
plt.plot(y, x3, linewidth='2', label='FedAvg')
plt.plot(y, x2, linewidth='2', label='FedProx')

plt.xlabel('Communication round')
plt.ylabel('Accuracy')
plt.legend()
plt.savefig("./mnist_loss.png", bbox_inches='tight')
plt.savefig("./mnist_loss.jpg", bbox_inches='tight')
plt.show()
