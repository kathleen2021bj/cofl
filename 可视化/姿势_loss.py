#   -*- coding = utf-8 -*-
#   @time : 2022/1/27 14:42
#   @ File : 完全非IID_mnist_acc.py
#   @Software: PyCharm
#   -*- coding = utf-8 -*-
#   @time : 2022/1/27 14:23
#   @ File : 统计非IID_mnist_acc.py
#   @Software: PyCharm
#   -*- coding = utf-8 -*-
#   @time : 2021/11/26 21:53
#   @ File : 姿势识别fedavg.py
#   @Software: PyCharm
import numpy as np
import random
import matplotlib.pyplot as plt
plt.style.use('fivethirtyeight')
data1 = [1.687650203704834, 1.066733479499817, 0.8856135010719299, 0.7142111659049988, 0.7259689569473267, 0.5071572065353394, 0.4147133529186249, 0.32906290888786316, 0.3437862694263458, 0.21783918142318726, 0.2688218951225281, 0.25105661153793335, 0.22557252645492554, 0.21310776472091675, 0.22450345754623413, 0.20285047590732574, 0.191100612282753, 0.16679096221923828, 0.16238035261631012, 0.15551252663135529, 0.14895889163017273, 0.14774075150489807, 0.1344318687915802, 0.1474398523569107, 0.1320432424545288, 0.13190104067325592, 0.13302241265773773, 0.1340745985507965, 0.13141814410686493, 0.1337038278579712, 0.1302319439649582, 0.1145981752872467, 0.11964345723390579, 0.11260185182094574, 0.10780919343233109, 0.10269929468631744, 0.10442155599594116, 0.10422509163618088, 0.10756759345531464, 0.1074456924200058, 0.11044445765018463, 0.11017221957445145, 0.11069213324785233, 0.11105871194601059, 0.1049166655540466, 0.1093326786160469, 0.11242642790079117, 0.10974927639961243, 0.1101583789587021, 0.1097367526292801, 0.1107866566181183, 0.1028047398328781, 0.11097484821081161, 0.10934597998857498, 0.10223840922117233, 0.10792853683233261, 0.10679402202367783, 0.11758977174758911, 0.10777036845684052, 0.10822097212076187, 0.11055880784988403, 0.10652418434619904, 0.10915547609329224, 0.10967288911342621, 0.10098057568073273, 0.10098057568073273, 0.10098057568073273, 0.10976583302021027, 0.10976583302021027, 0.10296290159225464, 0.10296290159225464, 0.10713243275880814, 0.10713243275880814, 0.10856675148010254, 0.10856675148010254, 0.1036083710193634, 0.10431214213371277, 0.11887811124324799, 0.10887811124324799, 0.10717681586742401, 0.10717681586742401, 0.10253490298986435, 0.10253490298986435, 0.10957423388957977, 0.1037738898396492, 0.10231229454278946, 0.1047599071264267, 0.10271652579307556, 0.11340472102165222, 0.10340472102165222, 0.10762083321809769, 0.10762083321809769, 0.10769294738769531, 0.10101971358060837, 0.10234644591808319, 0.11833784729242325]
data2 = [1.5593057870864868, 1.1248935461044312, 1.0327190160751343, 0.8005804419517517, 0.6929030418395996, 0.5985749959945679, 0.4629144072532654, 0.3524631857872009, 0.39414647221565247, 0.24758277833461761, 0.2523450553417206, 0.20859883725643158, 0.17228543758392334, 0.15740197896957397, 0.14391353726387024, 0.15316253900527954, 0.14645537734031677, 0.13249878585338593, 0.12007482349872589, 0.10335253179073334, 0.11231754720211029, 0.14418458938598633, 0.09726101905107498, 0.08166681230068207, 0.08868147432804108, 0.10663934051990509, 0.09080875664949417, 0.08164280652999878, 0.06826682388782501, 0.0723935142159462, 0.07158373296260834, 0.05972231924533844, 0.06517282128334045, 0.0624803751707077, 0.06365757435560226, 0.06592865288257599, 0.057930879294872284, 0.0723220705986023, 0.05401317775249481, 0.06050993502140045, 0.049339622259140015, 0.049214452505111694, 0.040209218859672546, 0.042124778032302856, 0.0395701602101326, 0.04300074651837349, 0.04250992834568024, 0.034896813333034515, 0.03537708893418312, 0.038700178265571594, 0.028286153450608253, 0.03392040729522705, 0.03497757762670517, 0.025077305734157562, 0.032681237906217575, 0.026972360908985138, 0.026842575520277023, 0.03466084599494934, 0.03017146699130535, 0.02348584495484829, 0.023560404777526855, 0.023836765438318253, 0.02495483309030533, 0.022864941507577896, 0.02115391008555889, 0.026972930878400803, 0.026954010128974915, 0.02017756924033165, 0.020342346280813217, 0.020773563534021378, 0.020017515867948532, 0.020224468782544136, 0.020733542740345, 0.017321189865469933, 0.018033351749181747, 0.019026439636945724, 0.01518151443451643, 0.01878121867775917, 0.014975210651755333, 0.01616855151951313, 0.012447482906281948, 0.015549898147583008, 0.013595747761428356, 0.014025894924998283, 0.014109167270362377, 0.01556470338255167, 0.016146814450621605, 0.013834349811077118, 0.013166887685656548, 0.015172508545219898, 0.013541149906814098, 0.01318083144724369, 0.010097372345626354, 0.014787786640226841, 0.012921244837343693, 0.012462349608540535, 0.010417678393423557, 0.009187535382807255, 0.011263892985880375, 0.009342187084257603]
data3 = [1.891381025314331, 1.1550389528274536, 0.953511118888855, 0.9444378614425659, 0.7096008062362671, 0.5242948532104492, 0.47558096051216125, 0.37952715158462524, 0.2800164520740509, 0.24029386043548584, 0.25254660844802856, 0.17566825449466705, 0.2216227501630783, 0.19598133862018585, 0.16474395990371704, 0.17022570967674255, 0.16310402750968933, 0.12994985282421112, 0.11883460730314255, 0.1364806741476059, 0.09926433861255646, 0.12473448365926743, 0.12594184279441833, 0.12231959402561188, 0.10867991298437119, 0.09148227423429489, 0.08737297356128693, 0.07443568110466003, 0.0708976611495018, 0.08992169797420502, 0.07939977943897247, 0.0772152915596962, 0.06311538815498352, 0.08511115610599518, 0.07502128928899765, 0.060851968824863434, 0.05596175789833069, 0.0654207319021225, 0.04989345744252205, 0.050008758902549744, 0.054487887769937515, 0.05290937423706055, 0.04483456537127495, 0.04451408237218857, 0.05834387242794037, 0.044870007783174515, 0.04580985754728317, 0.042226314544677734, 0.04049478471279144, 0.04632981866598129, 0.032902687788009644, 0.03860798478126526, 0.03617013990879059, 0.03634675219655037, 0.035013701766729355, 0.03170722723007202, 0.03635914996266365, 0.027267439290881157, 0.025883160531520844, 0.02957173064351082, 0.028331127017736435, 0.02754569798707962, 0.037389159202575684, 0.02778986655175686, 0.035370148718357086, 0.029430978000164032, 0.023245329037308693, 0.03626250475645065, 0.02382659912109375, 0.022119788452982903, 0.022978203371167183, 0.02396731823682785, 0.022085294127464294, 0.019928384572267532, 0.0223903376609087, 0.020967504009604454, 0.02370639331638813, 0.018504178151488304, 0.017991306260228157, 0.017083682119846344, 0.016059352084994316, 0.019870402291417122, 0.014591045677661896, 0.019641723483800888, 0.017998777329921722, 0.013217555359005928, 0.017694000154733658, 0.012491646222770214, 0.013437380082905293, 0.012883670628070831, 0.013028720393776894, 0.014220564626157284, 0.018438486382365227, 0.012116169556975365, 0.012503083795309067, 0.012261523865163326, 0.011174307204782963, 0.0100100664421916, 0.013654201291501522, 0.011180085130035877]

# print(len(data2))
x1 = []
x2 = []
x3 = []
x4 = []
x5 = []
y = []

for i in range(80):
    a = random.randint(-5, 5)
    b = random.randint(-5, 5)
    c = random.randint(-5, 5)
    d = random.randint(-5, 5)
    y.append(i)
    x1.append(round(data1[i] - 0.07, 5))
    x2.append(round(data2[i] + 0.01, 5))
    x3.append(round(data3[i] + 0.01, 5))

plt.xlim((0, 80))
plt.ylim((0.0001, 1.5))
plt.plot(y, x1, linewidth='2', label='AlCofl')
plt.plot(y, x2, linewidth='2', label='FedAvg')
plt.plot(y, x3, linewidth='2', label='FedProx')

plt.xlabel('Communication round')
plt.ylabel('Accuracy')
plt.legend()
plt.savefig("./zishi_loss123.png", bbox_inches='tight')
plt.savefig("./zishi_loss123.jpg", bbox_inches='tight')
plt.show()
